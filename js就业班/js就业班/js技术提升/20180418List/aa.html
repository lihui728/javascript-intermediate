<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <style>
    
  </style>
 </head>
 <body>
 <div id='a'>
 <input type='text' id='inp'>
 </div>
 <div style="width:300px;height:300px;background-color:red;" id='div'>
    <div style="width:100px;height:100px;background-color:green;" id='div'>
    
   </div>
   <div style="width:100px;height:100px;background-color:blue;" id='div'>
  
 </div>
 </div>
    <script>
	   var oInp = document.getElementById('inp');

// 防抖功能  
/*function debounce(handler,delay) {
    var timer = null;
    return function(e){
		console.log(e);
        var self = this;
        var arg = arguments;
		console.log(arg);
        clearTimeout(timer);
        timer = setTimeout(function(){
            handler.apply(self,arg);
        },delay)
    }
}

// 实现功能
function event() {
    console.log(this.value)
	console.log(arguments[0].target)
}
//event();

// 绑定事件
oInp.oninput = debounce(event, 500);



// oInp.oninput = function(){
//     console.log(self.value)
/*oInp.oninput = function(){
        var self = this;
       // var arg = arguments;
        clearTimeout(timer);
        timer = setTimeout(function(){
            handler.apply(self);
        },delay)
    }

function test(){
//	console.log(arguments);
}
test(1,2,30);
div.onclick = function (){
	console.log(arguments);
}*/
function createStore(initState) {
    var state = initState || {};  //{text: '',sex:'all'}
    // 存函数的数组---》公众号列表名
    var list = [];//创建新数组
    // 取到初始状态
    function getState() {
        return state;//返回状态
    }

    // 修改state状态
    function dispatch(action) {//
        // {type:text,value:'王'}
        // {type:sex,value:'mele'}
		 console.log(action.value);
        state[action.type] = action.value;//state[type.text] = wang
		console.log(state[action.type]);
        // 执行每一个函数
        list.forEach(function(ele,index){//?
            ele();
        })
    }
    // 订阅函数
    function subScribe(hander) {  
        list.push(hander);
    }
    return {
        getState: getState,
        dispatch: dispatch,
        subScribe: subScribe
    }
}
//store.dispatch({type:'text',value:this.value});

var b = createStore({text:'',value:'all'});
b.dispatch({text : 'a',value : 'bb'});

	</script>
 </body>
</html>
